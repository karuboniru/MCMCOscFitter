SET(NEUTRINO_STATE_VERSION 3.10.4)
project(NEUTRINO_STATE VERSION ${NEUTRINO_STATE_VERSION} LANGUAGES CXX C)

#Changes default install path to be a subdirectory of the build dir.
#Can set build dir at configure time with -DCMAKE_INSTALL_PREFIX=/install/path
if(CMAKE_INSTALL_PREFIX STREQUAL "" OR CMAKE_INSTALL_PREFIX STREQUAL
  "/usr/local")
  set(CMAKE_INSTALL_PREFIX "${CMAKE_BINARY_DIR}/${CMAKE_SYSTEM_NAME}")
elseif(NOT DEFINED CMAKE_INSTALL_PREFIX)
  set(CMAKE_INSTALL_PREFIX "${CMAKE_BINARY_DIR}/${CMAKE_SYSTEM_NAME}")
endif()

if(CMAKE_BUILD_TYPE STREQUAL "")
  set(CMAKE_BUILD_TYPE RELWITHDEBINFO)
elseif(NOT DEFINED CMAKE_BUILD_TYPE)
  set(CMAKE_BUILD_TYPE RELWITHDEBINFO)
endif()

# SET(HEADERS *.h)
file(GLOB 
  HEADERS
  RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}
  *.h
)

# SET(SOURCE *.cxx)
file(GLOB 
  SOURCE
  RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}
  *.cxx
)

add_library(NEUTRINO_STATE SHARED ${SOURCE})

target_link_libraries(
  NEUTRINO_STATE PUBLIC 
  ROOT::Core
  ROOT::EG
  state
  SimpleDataPoint
  data
)

set_target_properties(NEUTRINO_STATE PROPERTIES 
	PUBLIC_HEADER "${HEADERS}"
	EXPORT_NAME NEUTRINO_STATE)

target_include_directories(
  NEUTRINO_STATE PUBLIC $<BUILD_INTERFACE:${PROJECT_SOURCE_DIR}>
                       $<INSTALL_INTERFACE:include>
)

# install(TARGETS NEUTRINO_STATE 
# 		EXPORT NEUTRINO_STATE-target
# 		LIBRARY DESTINATION lib/
# 		PUBLIC_HEADER DESTINATION include/)

# install(EXPORT NEUTRINO_STATE-target
#   FILE NEUTRINO_STATETargets.cmake
#   NAMESPACE NEUTRINO_STATE::
#   DESTINATION ${CMAKE_INSTALL_PREFIX}/lib/cmake/NEUTRINO_STATE
# )

